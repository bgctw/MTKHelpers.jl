<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Helpers · MTKHelpers.jl</title><meta name="title" content="Helpers · MTKHelpers.jl"/><meta property="og:title" content="Helpers · MTKHelpers.jl"/><meta property="twitter:title" content="Helpers · MTKHelpers.jl"/><meta name="description" content="Documentation for MTKHelpers.jl."/><meta property="og:description" content="Documentation for MTKHelpers.jl."/><meta property="twitter:description" content="Documentation for MTKHelpers.jl."/><meta property="og:url" content="https://bgctw.github.io/MTKHelpers.jl/helpers/"/><meta property="twitter:url" content="https://bgctw.github.io/MTKHelpers.jl/helpers/"/><link rel="canonical" href="https://bgctw.github.io/MTKHelpers.jl/helpers/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MTKHelpers.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Update parameters</span><ul><li><a class="tocitem" href="../updating_problems/">Updating problems</a></li><li class="is-active"><a class="tocitem" href>Helpers</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Helper-functions-to-access-optimized-parameters"><span>Helper functions to access optimized parameters</span></a></li><li class="toplevel"><a class="tocitem" href="#Labeling-parameter-vectors"><span>Labeling parameter vectors</span></a></li><li class="toplevel"><a class="tocitem" href="#ProblemUpdater"><span>ProblemUpdater</span></a></li><li><a class="tocitem" href="#Bindings"><span>Bindings</span></a></li><li><a class="tocitem" href="#Alternative:-Problemupdater"><span>Alternative: Problemupdater</span></a></li><li class="toplevel"><a class="tocitem" href="#ProblemParGetter"><span>ProblemParGetter</span></a></li><li class="toplevel"><a class="tocitem" href="#ProblemParSetter"><span>ProblemParSetter</span></a></li></ul></li><li><a class="tocitem" href="../odeproblemparsetter/">ODEProblem</a></li><li><a class="tocitem" href="../concrete_parupdater/">Type inference</a></li></ul></li><li><a class="tocitem" href="../system_num_dict_scalar/">Translating symbols and Nums</a></li><li><a class="tocitem" href="../embed_system/">Embedding a system</a></li><li><a class="tocitem" href="../solution/">Solution handling</a></li><li><a class="tocitem" href="../smoothstep/">Smooth steps</a></li><li><a class="tocitem" href="../cairomakie/">CairoMakie Helpers</a></li><li><a class="tocitem" href="../write_csv_cv/">Writing/Reading ComponentVectors</a></li><li><span class="tocitem">Developer notes</span><ul><li><a class="tocitem" href="../pde_dev/">PDE support</a></li></ul></li><li><a class="tocitem" href="../zindex/">index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Update parameters</a></li><li class="is-active"><a href>Helpers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Helpers</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/bgctw/MTKHelpers.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/bgctw/MTKHelpers.jl/blob/main/docs/src/helpers.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Translating-between-parameters-and-Problem"><a class="docs-heading-anchor" href="#Translating-between-parameters-and-Problem">Translating between parameters and Problem</a><a id="Translating-between-parameters-and-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Translating-between-parameters-and-Problem" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="SciMLBase.remake-Tuple{SciMLBase.AbstractSciMLProblem, Any, AbstractProblemParSetter}"><a class="docstring-binding" href="#SciMLBase.remake-Tuple{SciMLBase.AbstractSciMLProblem, Any, AbstractProblemParSetter}"><code>SciMLBase.remake</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">remake(prob::AbstractSciMLProblem, popt, ps::AbstractProblemParSetter)</code></pre><p>Return an updated problem given the parameters. Subtypes need to implement method <code>remake_pset(prob, popt, pset)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L25-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.get_paropt-Tuple{AbstractProblemParSetter, SciMLBase.AbstractSciMLProblem}"><a class="docstring-binding" href="#MTKHelpers.get_paropt-Tuple{AbstractProblemParSetter, SciMLBase.AbstractSciMLProblem}"><code>MTKHelpers.get_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_paropt(pset::AbstractProblemParSetter, prob::SciMLBase.AbstractSciMLProblem; kwargs...)
get_paropt_labeled(pset::AbstractProblemParSetter, prob::SciMLBase.AbstractSciMLProblem; kwargs...)</code></pre><p>Extract optimized parameters from the Problem. The labeled versions additionally calls <a href="#MTKHelpers.label_paropt-Tuple{AbstractProblemParSetter, Any}"><code>label_paropt</code></a> on the return value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L36-L43">source</a></section></details></article><h1 id="Helper-functions-to-access-optimized-parameters"><a class="docs-heading-anchor" href="#Helper-functions-to-access-optimized-parameters">Helper functions to access optimized parameters</a><a id="Helper-functions-to-access-optimized-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Helper-functions-to-access-optimized-parameters" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="MTKHelpers.axis_paropt-Tuple{AbstractProblemParSetter}"><a class="docstring-binding" href="#MTKHelpers.axis_paropt-Tuple{AbstractProblemParSetter}"><code>MTKHelpers.axis_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">axis_paropt(pset::AbstractProblemParSetter)
axis_paropt_scalar(pset::AbstractProblemParSetter)
axis_paropt_flat1(pset::AbstractProblemParSetter)</code></pre><p>Report the Axis of a ComponentVector of parameters. The second version has a scalarized entry for state for each subvector of state. The third version provides an axis corresponding to  <code>flatten1(paropt)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L67-L75">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.classes_paropt-Tuple{AbstractProblemParSetter}"><a class="docstring-binding" href="#MTKHelpers.classes_paropt-Tuple{AbstractProblemParSetter}"><code>MTKHelpers.classes_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">function classes_paropt(pset::AbstractProblemParSetter)</code></pre><p>Get the classes (as NTuple{Symbol}) which the AbstractProblemParSetter  supports and requires in paropt.        </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L80-L85">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.count_paropt-Tuple{AbstractProblemParSetter}"><a class="docstring-binding" href="#MTKHelpers.count_paropt-Tuple{AbstractProblemParSetter}"><code>MTKHelpers.count_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">count_paropt(::AbstractProblemParSetter)</code></pre><p>Report length of the optimized parameters vector.     This generally is different from the length of keys, because each key can describe a array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L89-L95">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.keys_paropt-Tuple{AbstractProblemParSetter}"><a class="docstring-binding" href="#MTKHelpers.keys_paropt-Tuple{AbstractProblemParSetter}"><code>MTKHelpers.keys_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">keys_paropt(::AbstractProblemParSetter)</code></pre><p>Report the keys of paropt below the classification level.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L101-L105">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.symbols_paropt-Tuple{AbstractProblemParSetter}"><a class="docstring-binding" href="#MTKHelpers.symbols_paropt-Tuple{AbstractProblemParSetter}"><code>MTKHelpers.symbols_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">symbols_paropt(pset::AbstractProblemParSetter)</code></pre><p>Report the names, i.e. symbols of optimized parameters respectively,  i.e. the concatenation of components. Similar to <code>ComponentArrays.label</code>, but inferred from Axis object.   Returns a Vector of length <a href="#MTKHelpers.count_paropt-Tuple{AbstractProblemParSetter}"><code>count_paropt</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L113-L120">source</a></section></details></article><h1 id="Labeling-parameter-vectors"><a class="docs-heading-anchor" href="#Labeling-parameter-vectors">Labeling parameter vectors</a><a id="Labeling-parameter-vectors-1"></a><a class="docs-heading-anchor-permalink" href="#Labeling-parameter-vectors" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="MTKHelpers.label_paropt-Tuple{AbstractProblemParSetter, Any}"><a class="docstring-binding" href="#MTKHelpers.label_paropt-Tuple{AbstractProblemParSetter, Any}"><code>MTKHelpers.label_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">label_paropt(pset::AbstractProblemParSetter, popt::AbstractVector) 
label_paropt_flat1(pset::AbstractProblemParSetter, popt::AbstractVector)</code></pre><p>Produce a labeled version, i.e. a ComponentVector of optimized parameters. The second version omits the highest level of labels, e.g. state and par in  <code>ODEProblemParSetter</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L136-L143">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.name_paropt-Tuple{AbstractProblemParSetter, AbstractVector}"><a class="docstring-binding" href="#MTKHelpers.name_paropt-Tuple{AbstractProblemParSetter, AbstractVector}"><code>MTKHelpers.name_paropt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">name_paropt(pset, popt::AbstractVector) 
name_paropt(pset, prob::AbstractSciMLProblem)</code></pre><p>Produce a <code>NamedVector</code> of given state optimized parameters vector. Similar to <a href="#MTKHelpers.label_paropt-Tuple{AbstractProblemParSetter, Any}"><code>label_paropt</code></a>, but may print nicer. The second form calls <a href="#MTKHelpers.get_paropt-Tuple{AbstractProblemParSetter, SciMLBase.AbstractSciMLProblem}"><code>get_paropt</code></a> on the Problem.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L157-L164">source</a></section></details></article><h1 id="ProblemUpdater"><a class="docs-heading-anchor" href="#ProblemUpdater">ProblemUpdater</a><a id="ProblemUpdater-1"></a><a class="docs-heading-anchor-permalink" href="#ProblemUpdater" title="Permalink"></a></h1><p>The functioonality of ProblemUpdater can be better modeled since MTK version 10 using <a href="https://docs.sciml.ai/ModelingToolkit/dev/tutorials/initialization/#bindings_and_ics"><code>bindings</code></a>.</p><h2 id="Bindings"><a class="docs-heading-anchor" href="#Bindings">Bindings</a><a id="Bindings-1"></a><a class="docs-heading-anchor-permalink" href="#Bindings" title="Permalink"></a></h2><p>First, create an example system and example problem.</p><pre><code class="language-julia hljs">using ModelingToolkit, OrdinaryDiffEq, ComponentArrays
using ModelingToolkit: ModelingToolkit as MTK
using MTKHelpers
using ModelingToolkit: t_nounits as t, D_nounits as D
function get_sys1()
    sts = @variables L(t)
    ps = @parameters k_L, k_R, k_P
    eq = [D(L) ~ 0]
    sys1 = System(eq, t, sts, vcat(ps...); name = :sys1)
end
sys1 = mtkcompile(get_sys1())
ps1 = [sys1.L =&gt; 10.0, sys1.k_L =&gt; 1.0, sys1.k_R =&gt; 1.0/20.0, sys1.k_P =&gt; 2.0]
prob = ODEProblem(sys1, ps1, (0.0, 1.0))</code></pre><p>The bindings cannot be changed after the system is created.  MTKHelper provides function <a href="../embed_system/#MTKHelpers.override_system"><code>override_system</code></a> that allows to create a new system with several properties changes. Note that this is has been developed and tested only for basic ODESystems.</p><pre><code class="language-julia hljs">sys2 = mtkcompile(override_system(sys1,
    bindings = [sys1.k_R =&gt; sys1.k_L / 20.0, sys1.k_P =&gt; sys1.k_L * 2.0]))
ps2 = [sys2.L =&gt; 10.0, sys2.k_L =&gt; 1.0]
prob2 = ODEProblem(sys2, ps2, (0.0, 1.0))
prob3 = remake(prob, p = [sys2.k_L =&gt; 1.1])
prob.ps[sys2.k_P], prob2.ps[sys2.k_P]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(2.0, 2.0)</code></pre><p>If <a href="https://docs.sciml.ai/ModelingToolkit/dev/tutorials/initialization/#Initialization-By-Example:-The-Cartesian-Pendulum">initial conditions are bound</a>,  then initial conditions could be specified for the bound property instead of the original one.</p><h2 id="Alternative:-Problemupdater"><a class="docs-heading-anchor" href="#Alternative:-Problemupdater">Alternative: Problemupdater</a><a id="Alternative:-Problemupdater-1"></a><a class="docs-heading-anchor-permalink" href="#Alternative:-Problemupdater" title="Permalink"></a></h2><p>Bindings were introduced in MTK10. Before, a ProblemUpdater could be used to take care of updating dependent parameters.</p><p>A <a href="../odeproblemparsetter/#ODEProblemParSetterConcrete"><code>ODEProblemParSetterConcrete</code></a> can be combined with a <a href="#MTKHelpers.KeysProblemParGetter"><code>KeysProblemParGetter</code></a> or another specific implementation of <a href="#MTKHelpers.AbstractProblemParGetter"><code>AbstractProblemParGetter</code></a> to  update an AbstractODEProblem based on information already present in the AbstractODEProblem.</p><p>The following example updates parameters <code>k_R</code> and <code>k_P</code> in the AbstractODEProblem to the value of <code>k_L</code>. This can be useful to ensure that these parameters are also changed when optimizing parameter <code>k_L</code>.</p><p>An implementations of <code>AbstractProblemParGetter</code> can use any computation of the source keys to provide its destination keys. It should implement the keys method, so that when constructing the <code>ProblemUpdater</code>, consistent keys are used, as in the example below.</p><p>Next, setup a <code>ProblemUpdater</code>, <code>pu</code>, and apply it to the problem via <code>prob2 = pu(prob)</code>.</p><pre><code class="language-julia hljs">mapping = (:k_L =&gt; :k_R, :k_L =&gt; :k_P)
pu = get_ode_problemupdater(KeysProblemParGetter(mapping, prob), get_system(prob))
prob2 = pu(prob)
p2 = get_par_labeled(par_setter(pu), prob2)
p2.k_P == p2.k_R == Dict(ps1)[sys1.k_L]</code></pre><article><details class="docstring" open="true"><summary id="MTKHelpers.ProblemUpdater"><a class="docstring-binding" href="#MTKHelpers.ProblemUpdater"><code>MTKHelpers.ProblemUpdater</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ProblemUpdater(par_getter, par_setter)</code></pre><p>Encapsulates updating an AbstractODEProblem based on the problem itself by  Callable <code>(pu::ProblemUpdater)(prob)</code>.</p><p>Must be initialized with a callable <code>AbstractProblemParGetter</code>,  e.g. <a href="#MTKHelpers.KeysProblemParGetter"><code>KeysProblemParGetter</code></a> and on a <code>AbstractODEProblemParSetter</code>, e.g. <a href="../odeproblemparsetter/#ODEProblemParSetter"><code>ODEProblemParSetter</code></a>.</p><p>There are special functions to construct ProblemUpdater based on a given Problem:</p><ul><li><a href="#MTKHelpers.get_ode_problemupdater"><code>get_ode_problemupdater</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/problemupdater.jl#L18-L32">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.get_ode_problemupdater"><a class="docstring-binding" href="#MTKHelpers.get_ode_problemupdater"><code>MTKHelpers.get_ode_problemupdater</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_ode_problemupdater(par_getter::AbstractProblemParGetter, u0, p)
get_ode_problemupdater(par_getter::AbstractProblemParGetter, sys::AbstractSystem)</code></pre><p>Construct a <code>ProblemUpdater</code> based on an constructed <code>ODEProblemParSetterConcrete</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/problemupdater.jl#L52-L57">source</a></section><section><div><pre><code class="language-julia hljs">get_ode_problemupdater(par_getter::AbstractProblemParGetter, u0, p)
get_ode_problemupdater(par_getter::AbstractProblemParGetter, sys::AbstractSystem)</code></pre><p>Construct a <code>ProblemUpdater</code> based on an constructed <code>ODEProblemParSetterConcrete</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/problemupdater.jl#L52-L57">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MTKHelpers.NullProblemUpdater"><a class="docstring-binding" href="#MTKHelpers.NullProblemUpdater"><code>MTKHelpers.NullProblemUpdater</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>AbstractProblemUpdater that returns the original AbstractODEProblem.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/problemupdater.jl#L78-L80">source</a></section></details></article><h1 id="ProblemParGetter"><a class="docs-heading-anchor" href="#ProblemParGetter">ProblemParGetter</a><a id="ProblemParGetter-1"></a><a class="docs-heading-anchor-permalink" href="#ProblemParGetter" title="Permalink"></a></h1><p>In order to provide computations for parameters to set, declare a concrete subtype of <code>AbstractProblemParGetter</code>, and implement a custom  method <code>(pg::MyProblemParGetter)(pu::ProblemUpdater, prob)</code> that returns a vector of parameter values. </p><article><details class="docstring" open="true"><summary id="MTKHelpers.AbstractProblemParGetter"><a class="docstring-binding" href="#MTKHelpers.AbstractProblemParGetter"><code>MTKHelpers.AbstractProblemParGetter</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Supertype for callables that implement      <code>(::AbstractProblemParGetter)(problem) -&gt; updated_problem</code></p><p>Concrete subtypes should implement function <code>keys</code>, so that an appropriate  <code>AbstractODEProblemParSetter</code> can be constructed for <a href="#ProblemUpdater"><code>ProblemUpdater</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/problemupdater.jl#L9-L15">source</a></section></details></article><p>One simple subtype of <code>AbstractProblemParGetter</code> is <code>KeysProblemParGetter</code>,  which just extracts variables from the  original problem to update other parameters. It can be used to ensure that some parameter of a problem will always equal  another parameter of the problem. </p><article><details class="docstring" open="true"><summary id="MTKHelpers.KeysProblemParGetter"><a class="docstring-binding" href="#MTKHelpers.KeysProblemParGetter"><code>MTKHelpers.KeysProblemParGetter</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">KeysProblemParGetter(mapping::NTuple{N,Pair{Symbol, Symbol}, keys_state)</code></pre><p>Provides callable <code>(pg::KeysProblemParGetter)(pu::ProblemUpdater, prob), keys_state]</code>.     To be used to get the parameters/state vector to be set by <code>ProblemUpdater</code>.</p><p>Initialize with an mapping of NTuples of symbols (source -&gt; target) that index into  either <code>get_state_labeled(pu.pset, prob)</code> or <code>get_par_labeled(pu.pset, prob))</code>. Argument <code>keys_state</code> is a Tuple or Vector that iterates the Symbols in the state of an  ODEProblem. It is required to know from which part of the problem to extract.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/problemupdater.jl#L86-L96">source</a></section></details></article><h1 id="ProblemParSetter"><a class="docs-heading-anchor" href="#ProblemParSetter">ProblemParSetter</a><a id="ProblemParSetter-1"></a><a class="docs-heading-anchor-permalink" href="#ProblemParSetter" title="Permalink"></a></h1><p>Abstract supertype of <a href="../odeproblemparsetter/#ODEProblemParSetter"><code>ODEProblemParSetter</code></a></p><article><details class="docstring" open="true"><summary id="MTKHelpers.AbstractProblemParSetter"><a class="docstring-binding" href="#MTKHelpers.AbstractProblemParSetter"><code>MTKHelpers.AbstractProblemParSetter</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>During an optimization, one does not want to recreate the problem from a symbolic system, but only update the problem. This can be difficult, because the parameters to update may be spread across initial state and other parameters.  Further, the order of parameters after simplifying a system is not fixed.</p><p>A AbstractProblemUpdater helps with </p><ul><li><a href="#SciMLBase.remake-Tuple{SciMLBase.AbstractSciMLProblem, Any, AbstractProblemParSetter}"><code>remake</code></a>: translate the set of parameters -&gt; an updated problem </li><li><a href="#MTKHelpers.get_paropt-Tuple{AbstractProblemParSetter, SciMLBase.AbstractSciMLProblem}"><code>get_paropt</code></a>: problem -&gt; extract/approximate subset of parameters to optimize </li></ul><p>The structure of optimized parameter Vector is described by an Axis object  of ComponentArrays.jl. And several functions are defined to work with it. Specifically, the ComponentVector it employs a classification (<a href="#MTKHelpers.classes_paropt-Tuple{AbstractProblemParSetter}"><code>classes_paropt</code></a>), ,e.g. :<code>state</code> and <code>:par</code> for ODEProblems, below which, ComponentVectors of actual parameters are listed (<code>keys_paropt</code>](@ref)). Further functions extract information about the ComponentVector: <a href="#MTKHelpers.axis_paropt-Tuple{AbstractProblemParSetter}"><code>axis_paropt</code></a>, , <a href="#MTKHelpers.count_paropt-Tuple{AbstractProblemParSetter}"><code>count_paropt</code></a>,  <a href="#MTKHelpers.symbols_paropt-Tuple{AbstractProblemParSetter}"><code>symbols_paropt</code></a> or attach information to a plain vector for convenient access or display: <a href="#MTKHelpers.label_paropt-Tuple{AbstractProblemParSetter, Any}"><code>label_paropt</code></a>, <a href="#MTKHelpers.name_paropt-Tuple{AbstractProblemParSetter, AbstractVector}"><code>name_paropt</code></a>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bgctw/MTKHelpers.jl/blob/1024434aa0e2c4a09070b2a7e4602caa9034980a/src/abstractproblemparsetter.jl#L1-L22">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../updating_problems/">« Updating problems</a><a class="docs-footer-nextpage" href="../odeproblemparsetter/">ODEProblem »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 10 February 2026 14:10">Tuesday 10 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
